"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isShortcodeAST = exports.cleanCurly = exports.shortcodes = void 0;
const compiler_1 = require("./compiler");
const parser_1 = require("./parser");
const utils_1 = require("./utils");
Object.defineProperty(exports, "cleanCurly", { enumerable: true, get: function () { return utils_1.cleanCurly; } });
Object.defineProperty(exports, "isShortcodeAST", { enumerable: true, get: function () { return utils_1.isShortcodeAST; } });
function shortcodes(options) {
    const tokens = (options || {}).tokens || [
        ['{{<', '>}}'],
        ['{{%', '%}}']
    ];
    const inlineMode = (options || {}).inlineMode || false;
    const markdownAttributes = new Set((options || {}).markdownAttributes || []);
    if (utils_1.isRemarkParser(this.Parser)) {
        const parser = this.Parser.prototype;
        const tokenizers = inlineMode ? parser.inlineTokenizers : parser.blockTokenizers;
        const methods = inlineMode ? parser.inlineMethods : parser.blockMethods;
        tokenizers.shortcode = parser_1.getTokenizer(tokens, markdownAttributes);
        methods.splice(methods.indexOf('html'), 0, 'shortcode');
    }
    if (utils_1.isRemarkCompiler(this.Compiler)) {
        const compiler = this.Compiler.prototype;
        compiler.visitors.shortcode = compiler_1.shortcodeCompiler;
    }
}
exports.shortcodes = shortcodes;
//# sourceMappingURL=index.js.map